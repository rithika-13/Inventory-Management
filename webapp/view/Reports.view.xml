<mvc:View
    controllerName="project1.controller.Reports"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:tnt="sap.tnt"
    xmlns:core="sap.ui.core"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds">

    <tnt:ToolPage id="suppliers">
        <tnt:header>
            <tnt:ToolHeader>
                <Button
                    id="sideNavigationToggleButton"
                    icon="sap-icon://menu2"
                    press="onSideNavButtonPress"
                    tooltip="{i18n>sideNavigationToggleButtonTooltip}">
                </Button>
                <Title text="{i18n>Products}" level="H2"/>
            </tnt:ToolHeader>
        </tnt:header>
        
        <tnt:sideContent>
            <!-- Include the Fragment Here -->
            <core:Fragment fragmentName="project1.fragments.SideNavigation" type="XML"/>
        </tnt:sideContent>
        
        <tnt:mainContents>
            <App id="mainContents">
                <Page title="Product Stock Report">
                    <content>
                        <!-- Container for the charts -->
                        <VBox>
                            <!-- Bar Chart -->
                            <VBox>
                                <viz:VizFrame
                                    id="idVizFrame"
                                    uiConfig="{applicationSet:'fiori'}"
                                    vizType="bar"
                                    width="100%"
                                    height="500px"
                                    >
                                    
                                    <viz:dataset>
                                        <viz.data:FlattenedDataset
                                            data="{productsModel>/Products}">
                                            <viz.data:dimensions>
                                                <viz.data:DimensionDefinition
                                                    name="Product"
                                                    value="{productsModel>product_name}"/>
                                            </viz.data:dimensions>
                                            <viz.data:measures>
                                                <viz.data:MeasureDefinition
                                                    name="Quantity"
                                                    value="{productsModel>quantity_in_stock}"/>
                                            </viz.data:measures>
                                        </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                    
                                    <viz:feeds>
                                        <viz.feeds:FeedItem
                                            uid="valueAxis"
                                            type="Measure"
                                            values="Quantity"/>
                                        <viz.feeds:FeedItem
                                            uid="categoryAxis"
                                            type="Dimension"
                                            values="Product"/>
                                    </viz:feeds>
                                </viz:VizFrame>
                            </VBox>

                            <!-- Pie Chart -->
                            <VBox>
                                <viz:VizFrame
                                    id="idPieChart"
                                    uiConfig="{applicationSet:'fiori'}"
                                    vizType="pie"
                                    width="100%"
                                    height="500px"
                                    >
                                    
                                    <viz:dataset>
                                        <viz.data:FlattenedDataset
                                            data="{pieChartModel>/Categories}">
                                            <viz.data:dimensions>
                                                <viz.data:DimensionDefinition
                                                    name="Category"
                                                    value="{pieChartModel>category}"/>
                                            </viz.data:dimensions>
                                            <viz.data:measures>
                                                <viz.data:MeasureDefinition
                                                    name="Count"
                                                    value="{pieChartModel>count}"/>
                                            </viz.data:measures>
                                        </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                    
                                    <viz:feeds>
                                        <viz.feeds:FeedItem
                                            uid="size"
                                            type="Measure"
                                            values="Count"/>
                                        <viz.feeds:FeedItem
                                            uid="color"
                                            type="Dimension"
                                            values="Category"/>
                                    </viz:feeds>
                                </viz:VizFrame>
                            </VBox>

                            <!-- Scatter Plot -->
                            <VBox>
                                <viz:VizFrame
                                    id="idScatterPlot"
                                    uiConfig="{applicationSet:'fiori'}"
                                    vizType="scatter"
                                    width="100%"
                                    height="500px"
                                   >
                                    
                                    <viz:dataset>
                                        <viz.data:FlattenedDataset
                                            data="{productsModel>/Products}">
                                            <viz.data:dimensions>
                                                <viz.data:DimensionDefinition
                                                    name="Product"
                                                    value="{productsModel>product_name}"/>
                                            </viz.data:dimensions>
                                            <viz.data:measures>
                                                <viz.data:MeasureDefinition
                                                    name="Quantity"
                                                    value="{productsModel>quantity_in_stock}"/>
                                                <viz.data:MeasureDefinition
                                                    name="Price"
                                                    value="{productsModel>price_per_unit}"/>
                                            </viz.data:measures>
                                        </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                    
                                    <viz:feeds>
                                        <viz.feeds:FeedItem
                                            uid="valueAxis"
                                            type="Measure"
                                            values="Quantity"/>
                                        <viz.feeds:FeedItem
                                            uid="valueAxis2"
                                            type="Measure"
                                            values="Price"/>
                                        <viz.feeds:FeedItem
                                            uid="color"
                                            type="Dimension"
                                            values="Product"/>
                                    </viz:feeds>
                                </viz:VizFrame>
                            </VBox>

                            <!-- Stacked Bar Chart -->
                            <VBox>
                                <viz:VizFrame
                                    id="idStackedBarChart"
                                    uiConfig="{applicationSet:'fiori'}"
                                    vizType="stacked_bar"
                                    width="100%"
                                    height="500px"
                                    title="Quantity by Category and Product">
                                    
                                    <viz:dataset>
                                        <viz.data:FlattenedDataset
                                            data="{productsModel>/Products}">
                                            <viz.data:dimensions>
                                                <viz.data:DimensionDefinition
                                                    name="Category"
                                                    value="{productsModel>category}"/>
                                                <viz.data:DimensionDefinition
                                                    name="Product"
                                                    value="{productsModel>product_name}"/>
                                            </viz.data:dimensions>
                                            <viz.data:measures>
                                                <viz.data:MeasureDefinition
                                                    name="Quantity"
                                                    value="{productsModel>quantity_in_stock}"/>
                                            </viz.data:measures>
                                        </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                    
                                    <viz:feeds>
                                        <viz.feeds:FeedItem
                                            uid="valueAxis"
                                            type="Measure"
                                            values="Quantity"/>
                                        <viz.feeds:FeedItem
                                            uid="categoryAxis"
                                            type="Dimension"
                                            values="Category"/>
                                        <viz.feeds:FeedItem
                                            uid="color"
                                            type="Dimension"
                                            values="Product"/>
                                    </viz:feeds>
                                </viz:VizFrame>
                            </VBox>

                            <!-- Bubble Chart -->
                            <VBox>
                                <viz:VizFrame
                                    id="idBubbleChart"
                                    uiConfig="{applicationSet:'fiori'}"
                                    vizType="bubble"
                                    width="100%"
                                    height="500px"
                                    title="Price vs Quantity Bubble Chart">
                                    
                                    <viz:dataset>
                                        <viz.data:FlattenedDataset
                                            data="{productsModel>/Products}">
                                            <viz.data:dimensions>
                                                <viz.data:DimensionDefinition
                                                    name="Product"
                                                    value="{productsModel>product_name}"/>
                                            </viz.data:dimensions>
                                            <viz.data:measures>
                                                <viz.data:MeasureDefinition
                                                    name="Price"
                                                    value="{productsModel>price_per_unit}"/>
                                                <viz.data:MeasureDefinition
                                                    name="Quantity"
                                                    value="{productsModel>quantity_in_stock}"/>
                                                <viz.data:MeasureDefinition
                                                    name="BubbleSize"
                                                    value="{productsModel>quantity_in_stock}"/>
                                            </viz.data:measures>
                                        </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                    
                                    <viz:feeds>
                                        <viz.feeds:FeedItem
                                            uid="valueAxis"
                                            type="Measure"
                                            values="Quantity"/>
                                        <viz.feeds:FeedItem
                                            uid="valueAxis2"
                                            type="Measure"
                                            values="Price"/>
                                        <viz.feeds:FeedItem
                                            uid="bubbleWidth"
                                            type="Measure"
                                            values="BubbleSize"/>
                                        <viz.feeds:FeedItem
                                            uid="color"
                                            type="Dimension"
                                            values="Product"/>
                                    </viz:feeds>
                                </viz:VizFrame>
                            </VBox>

                            <!-- Column Chart -->
                            <VBox>
                                <viz:VizFrame
                                    id="idColumnChart"
                                    uiConfig="{applicationSet:'fiori'}"
                                    vizType="column"
                                    width="100%"
                                    height="500px"
                                    title="Price per Unit by Product">
                                    
                                    <viz:dataset>
                                        <viz.data:FlattenedDataset
                                            data="{productsModel>/Products}">
                                            <viz.data:dimensions>
                                                <viz.data:DimensionDefinition
                                                    name="Product"
                                                    value="{productsModel>product_name}"/>
                                            </viz.data:dimensions>
                                            <viz.data:measures>
                                                <viz.data:MeasureDefinition
                                                    name="Price"
                                                    value="{productsModel>price_per_unit}"/>
                                            </viz.data:measures>
                                        </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                    
                                    <viz:feeds>
                                        <viz.feeds:FeedItem
                                            uid="valueAxis"
                                            type="Measure"
                                            values="Price"/>
                                        <viz.feeds:FeedItem
                                            uid="categoryAxis"
                                            type="Dimension"
                                            values="Product"/>
                                    </viz:feeds>
                                </viz:VizFrame>
                            </VBox>
                        </VBox>
                    </content>
                </Page>
            </App>
        </tnt:mainContents>
    </tnt:ToolPage>
</mvc:View>
